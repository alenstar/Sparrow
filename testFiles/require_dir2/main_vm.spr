require foo as foo
require bar as bar

require bar as bar

def main() {

print("==========")
print("【虚拟机】测试require重复包含")

//重复包含了bar模块
//解释器应该只解析一遍，bar模块中的全局变量值在foo模块中的修改应该要生效

if bar.$bar_value != 20 {
  print("failed 1")  
  print(bar.$bar_value)
} else {
  print("success 1")  
}

if bar.$bar_str != "foo_bar" {
  print("failed 2")  
  print(bar.$bar_str)
} else {
  print("success 2")  
}

if bar.$foo != "new value" {
  print("failed 3")  
  print(bar.$foo)
} else {
  print("success 3")  
}

print("==========")

}
